[
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find all the phone numbers.",
        "query": "SELECT customer_phone FROM available_policies"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are all the phone numbers?",
        "query": "SELECT customer_phone FROM available_policies"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are the customer phone numbers under the policy \"Life Insurance\"?",
        "query": "SELECT customer_phone FROM available_policies WHERE policy_type_code  =  \"Life Insurance\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are the phone numbers of customers using the policy with the code \"Life Insurance\"?",
        "query": "SELECT customer_phone FROM available_policies WHERE policy_type_code  =  \"Life Insurance\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which policy type has the most records in the database?",
        "query": "SELECT policy_type_code FROM available_policies GROUP BY policy_type_code ORDER BY count(*) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which policy type appears most frequently in the available policies?",
        "query": "SELECT policy_type_code FROM available_policies GROUP BY policy_type_code ORDER BY count(*) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are all the customer phone numbers under the most popular policy type?",
        "query": "SELECT customer_phone FROM available_policies WHERE policy_type_code  =  (SELECT policy_type_code FROM available_policies GROUP BY policy_type_code ORDER BY count(*) DESC LIMIT 1)"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the phone numbers of customers using the most common policy type among the available policies.",
        "query": "SELECT customer_phone FROM available_policies WHERE policy_type_code  =  (SELECT policy_type_code FROM available_policies GROUP BY policy_type_code ORDER BY count(*) DESC LIMIT 1)"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the policy type used by more than 4 customers.",
        "query": "SELECT policy_type_code FROM available_policies GROUP BY policy_type_code HAVING count(*)  >  4"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the policy types more than 4 customers use. Show their type code.",
        "query": "SELECT policy_type_code FROM available_policies GROUP BY policy_type_code HAVING count(*)  >  4"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the total and average amount of settlements.",
        "query": "SELECT sum(settlement_amount) ,  avg(settlement_amount) FROM settlements"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Return the sum and average of all settlement amounts.",
        "query": "SELECT sum(settlement_amount) ,  avg(settlement_amount) FROM settlements"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the name of services that have been used for more than 2 times in first notification of loss.",
        "query": "SELECT t2.service_name FROM first_notification_of_loss AS t1 JOIN services AS t2 ON t1.service_id  =  t2.service_id GROUP BY t1.service_id HAVING count(*)  >  2"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which services have been used more than twice in first notification of loss? Return the service name.",
        "query": "SELECT t2.service_name FROM first_notification_of_loss AS t1 JOIN services AS t2 ON t1.service_id  =  t2.service_id GROUP BY t1.service_id HAVING count(*)  >  2"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What is the effective date of the claim that has the largest amount of total settlement?",
        "query": "SELECT t1.Effective_Date FROM claims AS t1 JOIN settlements AS t2 ON t1.claim_id  =  t2.claim_id GROUP BY t1.claim_id ORDER BY sum(t2.settlement_amount) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the claim that has the largest total settlement amount. Return the effective date of the claim.",
        "query": "SELECT t1.Effective_Date FROM claims AS t1 JOIN settlements AS t2 ON t1.claim_id  =  t2.claim_id GROUP BY t1.claim_id ORDER BY sum(t2.settlement_amount) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "How many policies are listed for the customer named \"Dayana Robel\"?",
        "query": "SELECT count(*) FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id WHERE t1.customer_name  =  \"Dayana Robel\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Count the total number of policies used by the customer named \"Dayana Robel\".",
        "query": "SELECT count(*) FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id WHERE t1.customer_name  =  \"Dayana Robel\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What is the name of the customer who has the most policies listed?",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id GROUP BY t1.customer_name ORDER BY count(*) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which customer uses the most policies? Give me the customer name.",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id GROUP BY t1.customer_name ORDER BY count(*) DESC LIMIT 1"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are all the policy types of the customer named \"Dayana Robel\"?",
        "query": "SELECT DISTINCT t3.policy_type_code FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id JOIN available_policies AS t3 ON t2.policy_id  =  t3.policy_id WHERE t1.customer_name  =  \"Dayana Robel\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Tell me the types of the policy used by the customer named \"Dayana Robel\".",
        "query": "SELECT DISTINCT t3.policy_type_code FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id JOIN available_policies AS t3 ON t2.policy_id  =  t3.policy_id WHERE t1.customer_name  =  \"Dayana Robel\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are all the policy types of the customer that has the most policies listed?",
        "query": "SELECT DISTINCT t3.policy_type_code FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id JOIN available_policies AS t3 ON t2.policy_id  =  t3.policy_id WHERE t1.customer_name  =  (SELECT t1.customer_name FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id GROUP BY t1.customer_name ORDER BY count(*) DESC LIMIT 1)"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "List all the policy types used by the customer enrolled in the most policies.",
        "query": "SELECT DISTINCT t3.policy_type_code FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id JOIN available_policies AS t3 ON t2.policy_id  =  t3.policy_id WHERE t1.customer_name  =  (SELECT t1.customer_name FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id GROUP BY t1.customer_name ORDER BY count(*) DESC LIMIT 1)"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "List all the services in the alphabetical order.",
        "query": "SELECT service_name FROM services ORDER BY service_name"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Give me a list of all the service names sorted alphabetically.",
        "query": "SELECT service_name FROM services ORDER BY service_name"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "How many services are there?",
        "query": "SELECT count(*) FROM services"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Count the total number of available services.",
        "query": "SELECT count(*) FROM services"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the names of users who do not have a first notification of loss record.",
        "query": "SELECT customer_name FROM customers EXCEPT SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which customers do not have a first notification of loss record? Give me the customer names.",
        "query": "SELECT customer_name FROM customers EXCEPT SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the names of customers who have used either the service \"Close a policy\" or the service \"Upgrade a policy\".",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"Close a policy\" OR t3.service_name  =  \"Upgrade a policy\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which customers have used the service named \"Close a policy\" or \"Upgrade a policy\"? Give me the customer names.",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"Close a policy\" OR t3.service_name  =  \"Upgrade a policy\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the names of customers who have used both the service \"Close a policy\" and the service \"New policy application\".",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"Close a policy\" INTERSECT SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"New policy application\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Which customers have used both the service named \"Close a policy\" and the service named \"Upgrade a policy\"? Give me the customer names.",
        "query": "SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"Close a policy\" INTERSECT SELECT t1.customer_name FROM customers AS t1 JOIN first_notification_of_loss AS t2 ON t1.customer_id  =  t2.customer_id JOIN services AS t3 ON t2.service_id  =  t3.service_id WHERE t3.service_name  =  \"New policy application\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the IDs of customers whose name contains \"Diana\".",
        "query": "SELECT customer_id FROM customers WHERE customer_name LIKE \"%Diana%\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are the IDs of customers who have \"Diana\" in part of their names?",
        "query": "SELECT customer_id FROM customers WHERE customer_name LIKE \"%Diana%\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are the maximum and minimum settlement amount on record?",
        "query": "SELECT max(settlement_amount) ,  min(settlement_amount) FROM settlements"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Find the maximum and minimum settlement amount.",
        "query": "SELECT max(settlement_amount) ,  min(settlement_amount) FROM settlements"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "List all the customers in increasing order of IDs.",
        "query": "SELECT customer_id ,  customer_name FROM customers ORDER BY customer_id ASC"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What is the ordered list of customer ids?",
        "query": "SELECT customer_id ,  customer_name FROM customers ORDER BY customer_id ASC"
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "Retrieve the open and close dates of all the policies associated with the customer whose name contains \"Diana\"",
        "query": "SELECT t2.date_opened ,  t2.date_closed FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id WHERE t1.customer_name LIKE \"%Diana%\""
    },
    {
        "dataset": "spider_training",
        "db_id": "insurance_fnol",
        "question": "What are the open and close dates of all the policies used by the customer who have \"Diana\" in part of their names?",
        "query": "SELECT t2.date_opened ,  t2.date_closed FROM customers AS t1 JOIN customers_policies AS t2 ON t1.customer_id  =  t2.customer_id WHERE t1.customer_name LIKE \"%Diana%\""
    }
]